<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Huffman Algorithm Simulator</title>
  <style>
    body {
      background-color: #0a1f44;
      font-family: 'Segoe UI', sans-serif;
      color: white;
      margin: 20px;
      padding-bottom: 80px; 
    }
    button {
      background-color: #1e4f91;
      color: white;
      border: none;
      padding: 10px 16px;
      font-size: 14px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    button:hover {
      background-color: #2566b2;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background-color: #102b5a;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.5);
      word-break: break-word;
    }
    th, td {
      border: 1px solid #4682b4;
      padding: 12px;
      text-align: center;
    }
    th {
      background-color: #1e4f91;
      color: white;
      font-weight: bold;
    }
    input[type="text"], input[type="number"] {
      width: 100px;
      padding: 6px;
      border: 1px solid #4682b4;
      border-radius: 4px;
      background-color: white;
      color: #0a1f44;
    }
    .delete-btn {
	  width: 115px;
      padding: 6px;
      background-color: #d9534f;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .delete-btn:hover {
      background-color: #c9302c;
    }
    .taskbar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: #1e4f91;
      color: #fff;
      display: flex;
      justify-content: center;
      padding: 14px;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      gap: 10px;
      flex-wrap: wrap;
    }
    #inputInterface {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 0;
      background-color: #102b5a;
      overflow: hidden;
      transition: height 0.3s ease;
      z-index: 999;
      border-top: 2px solid #4682b4;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
    }
    #inputInterface.open {
      height: 50vh;
    }
    .input-header, .innernew {
      background-color: #1e4f91;
      padding: 10px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      font-size: 16px;
      border-bottom: 1px solid #4682b4;
    }
    .input-header button {
      background-color: transparent;
      color: white;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }
    .input-content {
      padding: 20px;
      color: white;
    }
    .input-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .input-row label {
      min-width: 100px;
      font-weight: bold;
      color: white;
    }
    .input-row input {
      width: 100px;
      padding: 6px;
      border: 1px solid #4682b4;
      border-radius: 4px;
      background-color: white;
      color: #0a1f44;
    }
    .add-col-btn {
      background-color: #1e4f91;
      color: white;
      border: none;
      padding: 8px 14px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .add-col-btn:hover {
      background-color: #2566b2;
    }
    #encryInterface {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 0;
      background-color: #102b5a;
      overflow: hidden;
      transition: height 0.3s ease;
      z-index: 999;
      border-top: 2px solid #4682b4;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
    }
    #encryInterface.open {
      height: 50vh;
    }
    #encodeInput,
    #decodeInput {
      width: 80%;
    }
#infoBtn {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1100;
      width: 40px;
      height: 40px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 50%;
      background-color: #1e4f91;
      color: white;
      cursor: pointer;
    }
    #iframeOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      border: none;
      display: none;
      z-index: 1090;
    }
    @media (max-width: 600px) {
      body {
        margin: 10px;
        padding-bottom: 120px;
      }
      button {
        padding: 8px 12px;
        font-size: 12px;
      }
      .taskbar {
        padding: 10px;
        gap: 6px;
      }
      #encodeInput, #decodeInput {
        width: 100%;
      }
      .input-row label {
        min-width: 90px;
        font-size: 14px;
      }
      input[type="text"], input[type="number"] {
        width: 70px;
        padding: 5px;
        font-size: 14px;
      }
      table, th, td {
        font-size: 14px;
      }
      .add-col-btn {
        font-size: 14px;
        padding: 6px 10px;
      }
    }
  </style>
</head>
<body>
  <h2>Huffman Algorithm Simulator</h2>
  <table id="dynamicTable">
    <thead>
      <tr>
        <th>Symbol</th>
        <th>Code</th>
        <th>Code Length</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <div class="taskbar">
    <button id="inputBtn">Input</button>
    <button id="buildHuffmanBtn">Build Huffman Tree</button>
    <button id="encryDecryBtn">Encode/Decode</button>
	<button onclick="calculateTotalBits()">Calculate Total Bits</button>
    <button id="resetBtn">Reset</button>
  </div>
  <div id="inputInterface">
    <div class="input-header">
      <span>Input Panel (Fill your inputs in the below field. Use the + button in the right side of this panel to add a new set of inputs and X button to temporily close this panel. After closing the input panel, click the button "Build Huffmann Tree" to see the results.)</span>
<button id="infoBtn">i</button>
<iframe id="iframeOverlay" sandbox="allow-scripts allow-same-origin"></iframe>
<script>
  const infoBtn = document.getElementById('infoBtn');
  const iframeOverlay = document.getElementById('iframeOverlay');

const iframeContent = `
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <style>
      body {
        margin: 80px;  
        justify-content: center; 
        align-items: center; 
        max-width: 100vw;
		height: 100vh; 
        background: #0a1f44; 
        color: white; 
        font-family: sans-serif;
      }
      .closebutton {
        position: fixed;
        top: 30px;
        left: 20px;
        background: #d9534f;
        border: none;
        color: white;
        padding: 10px 14px;
        font-size: 16px;
        border-radius: 6px;
        cursor: pointer;
      }
#instructions {
  max-width: 700px;          
  margin: 70px auto 20px;    
}
    </style>
  </head>
  <body>
    <button class="closebutton" id="closeBtn">Close</button>
<section id="instructions" style="background:#102b5a; color:white; padding:20px; border-radius:8px; max-width: 2000px; margin: 20px auto; font-family: 'Segoe UI', sans-serif;">
  <h2>Huffman Algorithm Simulator â€” Instructions</h2>
  <h3>1. What is the Huffman Algorithm?</h3>
  <p>
    The Huffman Algorithm is a popular technique used for data compression. It creates a binary tree called a Huffman Tree based on the frequencies of characters in a dataset. Characters that appear more frequently get shorter codes, while less frequent characters get longer codes. This results in efficient encoding of data with fewer bits, minimizing storage space or transmission size.
  </p>
  <h3>2. What is this website about?</h3>
  <p>
    This website is an interactive Huffman Algorithm Simulator designed to help users understand and visualize how Huffman coding works. Users can input symbols and their frequencies, build the Huffman Tree, see the generated codes for each symbol, and encode/decode text using the generated codes.
  </p>
  <h3>3. How to use this website?</h3>
  <ul>
    <li>Input Panel: Click the Input button on the bottom taskbar to open the Input Panel. Enter your set of symbols (characters) and their respective frequencies. Use the + button inside the input panel to add new symbols. Use the Delete button next to each row to remove that symbol. Close the input panel by clicking the X button inside it.</li>
    <li>Build Huffman Tree: Click the Build Huffman Tree button to generate the Huffman codes for your input symbols. The table above will display each symbol, its Huffman code, and the code length.</li>
    <li>Encode / Decode Panel: Click the Encode/Decode button to open the panel where you can enter text to encode or binary to decode based on the current codes.</li>
    <li>Calculate Total Bits: Click this button to get the weighted total number of bits needed to encode your symbols with the current codes.</li>
    <li>Reset: Click to reset the page and clear all inputs and results.</li>
  </ul>
  <h3>4. What are the functions of the buttons on this website?</h3>
  <table style="width:100%; border-collapse: collapse; color: white; border: 1px solid #4682b4;">
    <thead style="background-color: #1e4f91;">
      <tr>
        <th style="padding: 10px; border: 1px solid #4682b4;">Button</th>
        <th style="padding: 10px; border: 1px solid #4682b4;">Function Description</th>
      </tr>
    </thead>
    <tbody>
      <tr style="background-color: #102b5a;">
        <td style="padding: 10px; border: 1px solid #4682b4;">Input</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Opens the input panel to add or edit symbols and their frequencies.</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #4682b4;">+ (Add)</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Adds a new symbol-frequency input pair inside the input panel.</td>
      </tr>
      <tr style="background-color: #102b5a;">
        <td style="padding: 10px; border: 1px solid #4682b4;">X (Close Input)</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Closes the input panel.</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #4682b4;">Delete (per row)</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Removes the corresponding symbol-frequency input row.</td>
      </tr>
      <tr style="background-color: #102b5a;">
        <td style="padding: 10px; border: 1px solid #4682b4;">Build Huffman Tree</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Builds the Huffman Tree and generates codes for each symbol, displaying them in the table.</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #4682b4;">Encode/Decode</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Opens the encode/decode panel for text-to-binary and binary-to-text conversions using current codes.</td>
      </tr>
      <tr style="background-color: #102b5a;">
        <td style="padding: 10px; border: 1px solid #4682b4;">X (Close Encode/Decode)</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Closes the encode/decode panel.</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #4682b4;">Calculate Total Bits</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Calculates weighted total bits needed to encode your symbols with current Huffman codes.</td>
      </tr>
      <tr style="background-color: #102b5a;">
        <td style="padding: 10px; border: 1px solid #4682b4;">Reset</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Resets the page and clears all inputs and outputs.</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #4682b4;">Info (i)</td>
        <td style="padding: 10px; border: 1px solid #4682b4;">Opens informational overlay for help or tips.</td>
      </tr>
    </tbody>
  </table>
</section>
  <br><br>
  <br><br>
<style>
  #iframeOverlay {
    font-size: 12px !important;
  }
</style>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('closeBtn').addEventListener('click', () => {
          window.parent.postMessage('closeIframe', '*');
        });
      });
    <\/script>
  </body>
  </html>
`;

  infoBtn.addEventListener('click', () => {
    iframeOverlay.style.display = 'block';
    iframeOverlay.srcdoc = iframeContent;
  });

  window.addEventListener('message', (event) => {
    if (event.data === 'closeIframe') {
      iframeOverlay.style.display = 'none';
      iframeOverlay.srcdoc = ''; 
    }
  });
</script>
      <div class="innernew">
        <button id="addColumnBtn" class="add-col-btn">+</button>
        <button id="closeInput" class="add-col-btn">X</button>
      </div>
    </div>
    <div class="input-content">
      <div id="charRow" class="input-row">
        <label>Character</label>
      </div>
      <div id="probRow" class="input-row">
        <label>Frequency</label>
      </div>
<div id="deleteRow" class="input-row">
  <label>Delete</label>
</div>
    </div>
  </div>
  <div id="encryInterface">
    <div class="input-header">
      <span>Encode / Decode Panel</span>
      <button id="closeEncry" class="add-col-btn">X</button>
    </div>
    <div class="input-content">
      <div class="input-row">
        <label for="encodeInput">Encode</label>
        <input type="text" id="encodeInput" placeholder="Enter text to encode" autocomplete="off" />
      </div>
      <div class="input-row">
        <label for="decodeInput">Decode</label>
        <input type="text" id="decodeInput" placeholder="Enter binary to decode" autocomplete="off" />
      </div>
    </div>
  </div>
<script src="huffmanalgorithmsimulationjs.js"></script>
<div id="weight-content" style="width: 20%; height: 100%; float: right; overflow-y: auto;">
</div>
</div>
<div id="draggableainameWidget" style="position:relative; width:100%; height:100%;">
  <button id="draggableainameFloatButton"
    style="position:absolute; top:90%; left:5%; transform:translate(-50%,-50%);
           padding:20px 24px; background-color:#0077cc; color:#fff; border:5px solid #fff;
           border-radius:50%; cursor:grab; font-size:20px; font-weight:bold;
           box-shadow:0 4px 8px rgba(0,0,0,0.2); user-select:none; z-index:1000;">
    AI
  </button>

  <iframe id="draggableainameIframe"
    style="position:fixed; top:0; right:0; width:20vw; height:100vh; border:none; background:#fff;
           box-shadow:-4px 0 12px rgba(0,0,0,0.2); display:none; z-index:999;"
    srcdoc="<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#fff; display:flex; flex-direction:column; height:100%; }
  #draggableainameHeader { position:relative; background:#0077cc; color:#fff; text-align:center; padding:12px; font-weight:bold; font-size:18px; }
  #draggableainameCloseButton { position:absolute; top:10px; right:10px; padding:6px 12px; background:#ff0000; color:#fff; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:14px; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
  #draggableainameCloseButton:hover { opacity:.9; }
  #draggableainameContent { flex:1; padding:10px; display:flex; flex-direction:column; gap:10px; }
  #draggableainameUserInput { width:90%; padding:8px; font-size:14px; border:1px solid #ccc; border-radius:6px; }
  .draggableainameAskButton { padding:8px; background:#0077cc; color:#fff; border:none; border-radius:6px; font-weight:bold; cursor:pointer; }
  .draggableainameAskButton:hover { background:#005fa3; }
  #draggableainameResponse { margin-top:10px; font-size:14px; color:#333; overflow-y:auto; max-height:70%; border-top:1px solid #ccc; padding-top:8px; white-space:pre-wrap; }
</style>
</head>
<body>
  <div id='draggableainameHeader'>Ask AI
    <button id='draggableainameCloseButton' aria-label='Close panel'>X</button>
  </div>
  <div id='draggableainameContent'>
    <input type='text' id='draggableainameUserInput' placeholder='Type your question...'>
    <button class='draggableainameAskButton' id='draggableainameAskButton'>Ask AI</button>
    <div id='draggableainameResponse'>Response will appear here...</div>
  </div>
<script>
  (function(){
    const draggableainameAskButton = document.getElementById('draggableainameAskButton');
    const draggableainameResponse = document.getElementById('draggableainameResponse');
    const draggableainameUserInput = document.getElementById('draggableainameUserInput');
    const draggableainameCloseButton = document.getElementById('draggableainameCloseButton');

    draggableainameCloseButton.addEventListener('click', function(){
      parent.postMessage({ type: 'draggableainame-close-iframe' }, '*');
    });

    draggableainameAskButton.addEventListener('click', async function(){
      const draggableainameQuestion = (draggableainameUserInput.value || '').trim();
      if(!draggableainameQuestion){
        draggableainameResponse.innerHTML = '<span style=&quot;color:red;&quot;>Please enter a question.</span>';
        return;
      }
      draggableainameResponse.innerHTML = '<em>Thinking...</em>';

      try {
        const draggableainameRes = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyC5ab-HZmvtoTEXMRBMb4-tPpwD2yMVF1A', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ contents: [ { parts: [ { text: draggableainameQuestion } ] } ] })
        });
        const draggableainameData = await draggableainameRes.json();
        const draggableainameText =
          (draggableainameData && draggableainameData.candidates && draggableainameData.candidates[0] &&
           draggableainameData.candidates[0].content && draggableainameData.candidates[0].content.parts &&
           draggableainameData.candidates[0].content.parts[0] && draggableainameData.candidates[0].content.parts[0].text)
           || 'No response from AI.';
        draggableainameResponse.textContent = draggableainameText;
      } catch (draggableainameErr) {
        draggableainameResponse.textContent = 'Error: ' + draggableainameErr.message;
      }
    });
  })();
</script>
</body>
</html>">
  </iframe>

  <script>
    (function(){
      const draggableainameFloatButton = document.getElementById('draggableainameFloatButton');
      const draggableainameIframe = document.getElementById('draggableainameIframe');

      draggableainameFloatButton.addEventListener('click', function(){
        draggableainameIframe.style.display = 'block';
        draggableainameFloatButton.style.display = 'none';
      });

      window.addEventListener('message', function(e){
        if(e && e.data && e.data.type === 'draggableainame-close-iframe'){
          draggableainameIframe.style.display = 'none';
          draggableainameFloatButton.style.display = 'inline-block';
        }
      });

      let draggableainameIsDragging = false;
      let draggableainameStartX = 0, draggableainameStartY = 0;
      let draggableainameOffsetX = 0, draggableainameOffsetY = 0;

      const draggableainameStartDrag = function(ev){
        ev.preventDefault();
        draggableainameIsDragging = false;

        const point = ev.touches ? ev.touches[0] : ev;
        draggableainameStartX = point.clientX;
        draggableainameStartY = point.clientY;

        draggableainameOffsetX = draggableainameFloatButton.offsetLeft;
        draggableainameOffsetY = draggableainameFloatButton.offsetTop;

        document.addEventListener('mousemove', draggableainameOnMove);
        document.addEventListener('mouseup', draggableainameStopDrag);
        document.addEventListener('touchmove', draggableainameOnMove, { passive: false });
        document.addEventListener('touchend', draggableainameStopDrag);
      };

      const draggableainameOnMove = function(ev){
        ev.preventDefault();
        const point = ev.touches ? ev.touches[0] : ev;
        const dx = point.clientX - draggableainameStartX;
        const dy = point.clientY - draggableainameStartY;

        if (Math.abs(dx) > 5 || Math.abs(dy) > 5) draggableainameIsDragging = true;

        if (draggableainameIsDragging) {
          let newX = draggableainameOffsetX + dx;
          let newY = draggableainameOffsetY + dy;

          const maxX = window.innerWidth - draggableainameFloatButton.offsetWidth;
          const maxY = window.innerHeight - draggableainameFloatButton.offsetHeight;

          newX = Math.max(0, Math.min(newX, maxX));
          newY = Math.max(0, Math.min(newY, maxY));

          draggableainameFloatButton.style.left = newX + 'px';
          draggableainameFloatButton.style.top = newY + 'px';
        }
      };

      const draggableainameStopDrag = function(){
        document.removeEventListener('mousemove', draggableainameOnMove);
        document.removeEventListener('mouseup', draggableainameStopDrag);
        document.removeEventListener('touchmove', draggableainameOnMove);
        document.removeEventListener('touchend', draggableainameStopDrag);
      };

      draggableainameFloatButton.addEventListener('mousedown', draggableainameStartDrag);
      draggableainameFloatButton.addEventListener('touchstart', draggableainameStartDrag, { passive: false });
    })();
  </script>
</div>		
</body>
</html>
