<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warshall Algorithm</title>
 <link rel="stylesheet" type="text/css" href="warshallcss.css">
</head>
<body>
<center>
	<h1>Warshall Algorithm Simulation</h1>
</center>
  <div id="root"></div>
  <!-- Bottom Taskbar -->
  <div id="taskbar">
    <button id="about">About</button>
  </div>

  <div class="about-iframe-overlay" id="about-iframe-overlay" style="display:none;">
    <div class="about-iframe-container">
      <iframe
        srcdoc="
<html>
  <head>
    <style>
      .coloro {
        font-family: Arial, sans-serif;
        line-height: 1.6;
	color: #000000;
      }
    </style>
  </head>
  <body style='background-color: #a7e5ff; padding: 20px;'>
    <p class='coloro'>
      <b>Warshall’s Algorithm (Transitive Closure)</b>
      <br><br>
      This interactive simulation allows users to explore Warshall's Algorithm, which is used to compute the transitive closure of a directed graph represented as an adjacency matrix.
      <br><br>
      <b>How it works:</b>
      <br><br>
      * Initially, an overlay prompts the user to begin the simulation.<br>
      * The user enters the number of vertices in the graph (only 0 or 1).<br>
      * 0 represents that there is no outgoing edge and 1 represents there is a outgoing edge from the vertx.<br>
      * A matrix input interface is generated where each cell accepts 0 or 1 (indicating absence or presence of an edge).<br>
      * Upon clicking “Calculate Transitive Closure”, the matrix is updated using Warshall’s algorithm logic:<br>
      &nbsp;&nbsp;&nbsp;&nbsp;- For each intermediate vertex k, it checks all pairs (i, j).<br>
      &nbsp;&nbsp;&nbsp;&nbsp;- If a path exists from i to k and from k to j, a path from i to j is established.<br>
      * The result is displayed below as the transitive closure matrix.
      <br><br>
      <b>Time complexity:</b><br>
      O(V³), where V is the number of vertices.
      <br><br>
      <b>Use cases:</b><br>
      * Reachability analysis<br>
      * Program dependency graphs<br>
      * Database query optimization<br>
      * Logic inference systems
    </p>
  </body>
</html>
"
        frameborder="0"
        width="100%"
        height="100%"
      ></iframe>

      <span class="about-close-btn" id="about-close-btn" style="cursor:pointer; font-size: 30px; position: absolute; top: 5px; right: 15px; color: white;">&times;</span>
    </div>
  </div>

    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [rows, setRows] = useState(0);
            const [cols, setCols] = useState(0);
            const [matrix, setMatrix] = useState([]);
            const [transitiveClosure, setTransitiveClosure] = useState([]);
            const [showOverlay, setShowOverlay] = useState(true);
            const [inputMatrix, setInputMatrix] = useState(false);

            const handleOverlayClose = () => {
                setShowOverlay(false);
                alert("Enter the number of rows in the matrix. The rows and columns should be same.");
            };

            const handleMatrixChange = (i, j, value) => {
                const newMatrix = [...matrix];
                newMatrix[i][j] = value;
                setMatrix(newMatrix);
            };

const [vertices, setVertices] = useState(0);

const createMatrix = () => {
  const size = vertices;
  const newMatrix = Array(size).fill().map(() => Array(size).fill(0));
  setMatrix(newMatrix);
  setInputMatrix(true);
};

const calculateTransitiveClosure = () => {
  const newMatrix = [...matrix];
  for (let k = 0; k < vertices; k++) {
    for (let i = 0; i < vertices; i++) {
      for (let j = 0; j < vertices; j++) {
        if (newMatrix[i][k] === 1 && newMatrix[k][j] === 1) {
          newMatrix[i][j] = 1;
        }
      }
    }
  }
  setTransitiveClosure(newMatrix);
};

            return (
                <div>
                    {showOverlay && (
                        <div className="overlay">
                            <h1 style={{ color: '#fff' }}>Warshall Algorithm Problem Solver</h1>
                            <button onClick={handleOverlayClose}>Enter</button>
                        </div>
                    )}
                    {!showOverlay && (
                        <div>
                            {!inputMatrix && (
                                <div>
  <input 
    type="number" 
    placeholder="Number of Vertices" 
    onChange={(e) => setVertices(parseInt(e.target.value))} 
  />
  <button onClick={createMatrix}>Create Matrix</button>
</div>
                            )}
                            {inputMatrix && (
                                <div>
                                    {matrix.map((row, i) => (
                                        <div key={i}>
                                            {row.map((value, j) => (
                                                <input
													key={j}
													type="number"
													min={0}
													max={1}
													value={value}
													onChange={(e) => {
														const val = parseInt(e.target.value);
														if (val === 0 || val === 1) {
															handleMatrixChange(i, j, val);
														} else {
															alert("Invalid Input");
															e.target.value = value;
														}
													}}
												/>
                                            ))}
                                        </div>
                                    ))}
									<div className="menu-bar">
                                    <button onClick={calculateTransitiveClosure}>Calculate Transitive Closure</button>
									</div>
                                    {transitiveClosure.length > 0 && (
                                        <div>
                                            <h2>Transitive Closure:</h2>
                                            {transitiveClosure.map((row, i) => (
                                                <div key={i}>
                                                    {row.map((value, j) => (
                                                        <span key={j}>{value} </span>
                                                    ))}
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(
            <App />,
            document.getElementById('root')
        );
    </script>
<script>
  document.getElementById("about").onclick = function () {
    document.getElementById("about-iframe-overlay").style.display = "block";
  };

  document.getElementById("about-close-btn").onclick = function () {
    document.getElementById("about-iframe-overlay").style.display = "none";
  };
</script>	
<div id="weight-content" style="width: 20%; height: 100%; float: right; overflow-y: auto;">
</div>
</div>
<div id="draggableainameWidget" style="position:relative; width:100%; height:100%;">
  <button id="draggableainameFloatButton"
    style="position:absolute; top:90%; left:5%; transform:translate(-50%,-50%);
           padding:20px 24px; background-color:#0077cc; color:#fff; border:5px solid #fff;
           border-radius:50%; cursor:grab; font-size:20px; font-weight:bold;
           box-shadow:0 4px 8px rgba(0,0,0,0.2); user-select:none; z-index:1000;">
    AI
  </button>

  <iframe id="draggableainameIframe"
    style="position:fixed; top:0; right:0; width:20vw; height:100vh; border:none; background:#fff;
           box-shadow:-4px 0 12px rgba(0,0,0,0.2); display:none; z-index:999;"
    srcdoc="<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#fff; display:flex; flex-direction:column; height:100%; }
  #draggableainameHeader { position:relative; background:#0077cc; color:#fff; text-align:center; padding:12px; font-weight:bold; font-size:18px; }
  #draggableainameCloseButton { position:absolute; top:10px; right:10px; padding:6px 12px; background:#ff0000; color:#fff; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:14px; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
  #draggableainameCloseButton:hover { opacity:.9; }
  #draggableainameContent { flex:1; padding:10px; display:flex; flex-direction:column; gap:10px; }
  #draggableainameUserInput { width:90%; padding:8px; font-size:14px; border:1px solid #ccc; border-radius:6px; }
  .draggableainameAskButton { padding:8px; background:#0077cc; color:#fff; border:none; border-radius:6px; font-weight:bold; cursor:pointer; }
  .draggableainameAskButton:hover { background:#005fa3; }
  #draggableainameResponse { margin-top:10px; font-size:14px; color:#333; overflow-y:auto; max-height:70%; border-top:1px solid #ccc; padding-top:8px; white-space:pre-wrap; }
</style>
</head>
<body>
  <div id='draggableainameHeader'>Ask AI
    <button id='draggableainameCloseButton' aria-label='Close panel'>X</button>
  </div>
  <div id='draggableainameContent'>
    <input type='text' id='draggableainameUserInput' placeholder='Type your question...'>
    <button class='draggableainameAskButton' id='draggableainameAskButton'>Ask AI</button>
    <div id='draggableainameResponse'>Response will appear here...</div>
  </div>
<script>
  (function(){
    const draggableainameAskButton = document.getElementById('draggableainameAskButton');
    const draggableainameResponse = document.getElementById('draggableainameResponse');
    const draggableainameUserInput = document.getElementById('draggableainameUserInput');
    const draggableainameCloseButton = document.getElementById('draggableainameCloseButton');

    draggableainameCloseButton.addEventListener('click', function(){
      parent.postMessage({ type: 'draggableainame-close-iframe' }, '*');
    });

    draggableainameAskButton.addEventListener('click', async function(){
      const draggableainameQuestion = (draggableainameUserInput.value || '').trim();
      if(!draggableainameQuestion){
        draggableainameResponse.innerHTML = '<span style=&quot;color:red;&quot;>Please enter a question.</span>';
        return;
      }
      draggableainameResponse.innerHTML = '<em>Thinking...</em>';

      try {
        const draggableainameRes = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyC5ab-HZmvtoTEXMRBMb4-tPpwD2yMVF1A', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ contents: [ { parts: [ { text: draggableainameQuestion } ] } ] })
        });
        const draggableainameData = await draggableainameRes.json();
        const draggableainameText =
          (draggableainameData && draggableainameData.candidates && draggableainameData.candidates[0] &&
           draggableainameData.candidates[0].content && draggableainameData.candidates[0].content.parts &&
           draggableainameData.candidates[0].content.parts[0] && draggableainameData.candidates[0].content.parts[0].text)
           || 'No response from AI.';
        draggableainameResponse.textContent = draggableainameText;
      } catch (draggableainameErr) {
        draggableainameResponse.textContent = 'Error: ' + draggableainameErr.message;
      }
    });
  })();
</script>
</body>
</html>">
  </iframe>

  <script>
    (function(){
      const draggableainameFloatButton = document.getElementById('draggableainameFloatButton');
      const draggableainameIframe = document.getElementById('draggableainameIframe');

      draggableainameFloatButton.addEventListener('click', function(){
        draggableainameIframe.style.display = 'block';
        draggableainameFloatButton.style.display = 'none';
      });

      window.addEventListener('message', function(e){
        if(e && e.data && e.data.type === 'draggableainame-close-iframe'){
          draggableainameIframe.style.display = 'none';
          draggableainameFloatButton.style.display = 'inline-block';
        }
      });

      let draggableainameIsDragging = false;
      let draggableainameStartX = 0, draggableainameStartY = 0;
      let draggableainameOffsetX = 0, draggableainameOffsetY = 0;

      const draggableainameStartDrag = function(ev){
        ev.preventDefault();
        draggableainameIsDragging = false;

        const point = ev.touches ? ev.touches[0] : ev;
        draggableainameStartX = point.clientX;
        draggableainameStartY = point.clientY;

        draggableainameOffsetX = draggableainameFloatButton.offsetLeft;
        draggableainameOffsetY = draggableainameFloatButton.offsetTop;

        document.addEventListener('mousemove', draggableainameOnMove);
        document.addEventListener('mouseup', draggableainameStopDrag);
        document.addEventListener('touchmove', draggableainameOnMove, { passive: false });
        document.addEventListener('touchend', draggableainameStopDrag);
      };

      const draggableainameOnMove = function(ev){
        ev.preventDefault();
        const point = ev.touches ? ev.touches[0] : ev;
        const dx = point.clientX - draggableainameStartX;
        const dy = point.clientY - draggableainameStartY;

        if (Math.abs(dx) > 5 || Math.abs(dy) > 5) draggableainameIsDragging = true;

        if (draggableainameIsDragging) {
          let newX = draggableainameOffsetX + dx;
          let newY = draggableainameOffsetY + dy;

          const maxX = window.innerWidth - draggableainameFloatButton.offsetWidth;
          const maxY = window.innerHeight - draggableainameFloatButton.offsetHeight;

          newX = Math.max(0, Math.min(newX, maxX));
          newY = Math.max(0, Math.min(newY, maxY));

          draggableainameFloatButton.style.left = newX + 'px';
          draggableainameFloatButton.style.top = newY + 'px';
        }
      };

      const draggableainameStopDrag = function(){
        document.removeEventListener('mousemove', draggableainameOnMove);
        document.removeEventListener('mouseup', draggableainameStopDrag);
        document.removeEventListener('touchmove', draggableainameOnMove);
        document.removeEventListener('touchend', draggableainameStopDrag);
      };

      draggableainameFloatButton.addEventListener('mousedown', draggableainameStartDrag);
      draggableainameFloatButton.addEventListener('touchstart', draggableainameStartDrag, { passive: false });
    })();
  </script>
</div>		
</body>
</html>

